<mat-card-header>
    <button mat-icon-button class="close-button" (click)="ngOnDestroy()">
        <mat-icon>close</mat-icon>
    </button>
</mat-card-header>

<mat-card class="job-card" *ngIf="job">
    <mat-card-content class="job-content">
        <div class="job-details-left">
            <h2 class="job-title">{{job.jobTitle}}</h2>
            <p class="job-posted-time">Posted: {{job.postedAtUTC | timePipe}}</p>
            <p class="job-location">Location: Remote</p>
            <mat-divider class="divider"></mat-divider>
            <div class="job-description-section">
                <h3 class="job-description-title">Job Description</h3>
                <p class="job-description">
                    {{job.jobDescription}}
                </p>
            </div>
        </div>
        <div class="job-details-right">
            <div class="job-actions">
                
                <button mat-raised-button class="save-button">Save Job</button>
            </div>
            <mat-divider class="divider"></mat-divider>
            <div class="job-creator">
                <p>Job Posted by: {{job.creatorName}}</p>
                <p>Jobs Posted by this User: {{job.jobsByCreatorCount}}</p>
                <p>Applications: {{job.applicationsCount}}</p>
            </div>
        </div>
    </mat-card-content>

    <form>
        <mat-card class="job-card">
            <div class="apply-section">
                <h3 class="apply-title">Apply for this Job</h3>
                <div class="file-upload">
                    <mat-label>Upload CV(pdf)</mat-label>
                    <button mat-button (click)="onClick()">
                        <mat-icon>cloud_upload</mat-icon>
                    </button>
                    
                    <input type="file" #fileUpload id="fileUpload" name="fileUpload" (change)="onFileChange($event)" accept=".pdf" style="display: none;">
                    <mat-label *ngIf="cvFile">{{cvFile.name}}</mat-label>
                </div>
                <mat-form-field class="cover-letter">
                    <mat-label>Cover Letter (Optional)</mat-label>
                    <textarea (change)="onTextChange(coverLetter.value)" #coverLetter matInput rows="10" style="width: 100%;"></textarea>
                </mat-form-field>
                <button mat-raised-button color="primary" class="apply-button" (click)="onSubmit()">Apply Now</button>
            </div>
        </mat-card>
    </form>
</mat-card>
